<!-- PANEL ADMIN -->
<div class="panel panel__admin" id="panel-admin">
  <div class="module">
    <div class="row" v-for="request in requests">
      <div class="col-1-of-1">
        <div class="module__admin-request">
          <p class="module__admin-request--name">\{{ request.firstname }} \{{ request.lastname }}</p>
          <p class="module__admin-request--choice module__admin-request--choice--accept" @click="acceptRequest(request._id)">
            <i class="fa fa-check" aria-hidden="true"></i>
          </p>
          <p class="module__admin-request--choice module__admin-request--choice--refuse" @click="refuseRequest(request._id)">
            <i class="fa fa-times" aria-hidden="true"></i>
          </p>
        </div>
      </div>
    </div>
    <div class="row" v-if="requests.length === 0">
      <div class="col-1-of-1">
        <p>Nessuna richiesta di registrazione.</p>
      </div>
    </div>
  </div>
  <div class="module">
    <div class="row">
      <div class="col-1-of-2">
        <input type="text" class="module-input-text" placeholder="Nome" autocomplete="off" ref="adminCreateUserFirstname">
      </div>
      <div class="col-1-of-2">
        <input type="text" class="module-input-text" placeholder="Cognome" autocomplete="off" ref="adminCreateUserLastname">
      </div>
    </div>
    <div class="row">
      <div class="col-1-of-2">
        <input type="email" class="module-input-text" placeholder="Email" autocomplete="off" ref="adminCreateUserEmail">
      </div>
      <div class="col-1-of-2">
        <input type="password" class="module-input-text" placeholder="Password" autocomplete="off" ref="adminCreateUserPassword">
      </div>
    </div>
    <div class="row">
      <div class="col-1-of-2">
        <select class="module-input-select" ref="adminCreateUserPrivileges">
          <option class="module-input-option" disabled value="">Privilegi</option>
          <option class="module-input-option" v-for="privilege in privileges" v-bind:value="privilege._id">\{{privilege.privilege}}</option>
        </select>
      </div>
      <div class="col-1-of-2">
        <div class="module-multiple-select">
          <input type="text" class="module-input-text" placeholder="VisibilitÃ " v-model="multipleSelectField" v-on:keyup="typing">
          <div class="module-multiple-select__results">
            <ul>
              <li v-bind:value="result._id" v-for="result in multipleSelectResults" v-on:click="click">\{{ result.subject }}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-1-of-1" v-if="multipleSelectOutput.length != 0">
        <div class="module-multiple-select-tag-box">
          <ul>
            <li v-bind:value="output._id" v-for="output in multipleSelectOutput" v-on:click="remove">\{{ output.subject }}</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-1-of-1">
        <button class="module-button module-button--green" @click="createUser">Crea account</button>
      </div>
    </div>
  </div>
  <div class="module" id="module-admin-users-search">
    <div class="row">
      <div class="col-1-of-1">
        <input type="text" class="module-input-text" placeholder="Cerca utenti" autocomplete="off" v-model="key" v-on:keyup="search">
      </div>
    </div>
  </div>
  <div class="module" v-if="users && key">
    <div class="row" v-for="user in users">
      <div class="col-1-of-1">
        <article class="module-admin-users-search-article">
          <p class="module-admin-users-search-article--name u-margin-bottom-medium">\{{user.firstname}} \{{user.lastname}}</p>
          <p class="module-admin-users-search-article--privileges u-margin-bottom-medium"></p>
          <a v-bind:href="`mailto:${user.email}`" class="module-admin-users-search-article--email u-margin-bottom-medium"><span>Email: </span>\{{user.email}}</a>
          <p class="module-admin-users-search-article--password-reset u-color-blue" @click="resetPassword(user._id)">Reimposta password</p>


          <p class="module-admin-users-search-article--toggle-privileges u-color-yellow" @click="togglePrivileges(user._id)" v-if="user.privileges === 'user'">Rendi admin</p>
          <p class="module-admin-users-search-article--toggle-privileges u-color-yellow" @click="togglePrivileges(user._id)" v-else>Rendi user</p>
          <p class="module-admin-users-search-article--account-disable u-color-green" @click="toggleState(user._id)" v-if="user.state === 'disabled'">Attiva</p>
          <p class="module-admin-users-search-article--account-disable u-color-red" @click="toggleState(user._id)" v-else>Disattiva</p>
        </article>
      </div>
    </div>
    <div class="row" v-if="users.length === 0">
      <div class="col-1-of-1">
        <p class="module-document-search-noresults">Nessun risultato</p>
      </div>
    </div>
  </div>
  <div class="module" v-if="response">
    <div class="row">
      <div class="col-1-of-1">
        <p>\{{responseMessage}}</p>
      </div>
    </div>
  </div>
</div>
